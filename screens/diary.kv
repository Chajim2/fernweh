#:import Window kivy.core.window.Window
#:import PRIMARY utils.loading.PRIMARY
#:import SECONDARY utils.loading.SECONDARY
#:import ACCENT utils.loading.ACCENT
#:import TEXT utils.loading.TEXT
#:import dp kivy.metrics.dp

<DiaryConstructor>:
    canvas.before:
        Color:
            rgba: PRIMARY
        Rectangle:
            pos: self.pos
            size: self.size

    orientation: "vertical"
    padding: dp(10)
    spacing: dp(10)
    
    # Top navigation bar
    BoxLayout:
        size_hint_y: 0.1
        spacing: dp(10)
        
        StyledButton:
            text: "Home"
            size_hint_x: 0.2
            font_size: sp(20)
            on_press: root.go_to_home()
        
        Widget:
            size_hint_x: 0.8

    StyledLabel:
        text: "Your Topic"
        font_size: sp(24)
        size_hint_y: 0.08
        halign: 'left'

    ScrollView:
        size_hint_y: 0.5
        do_scroll_x: False
        
        TextInput:
            id: diary_input
            size_hint_y: None
            height: max(self.minimum_height, Window.height * 0.4)
            hint_text: "Enter your text here"
            font_name: "Regular"
            font_size: sp(18)
            padding: dp(10)
            multiline: True
            background_color: SECONDARY
            foreground_color: TEXT

    Widget:
        size_hint_y: 0.03

    StyledButton:
        id: button
        text: "Submit"
        font_size: sp(20)
        size_hint_y: 0.08
        size_hint_x: 0.8
        on_press: root.submit_text(diary_input.text)

    Widget:
        id: placeholder
        size_hint_y: 0.3
   
    BoxLayout:
        id: labels_container
        size_hint_y: 0.01
        orientation: 'vertical'
        spacing: 0
        padding: 0
    
<DiaryScreen>:
    DiaryConstructor: